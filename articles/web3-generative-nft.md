---
title: "Fully-On-Chain.solã§ä½œã‚‹ãƒ•ãƒ«ã‚ªãƒ³ãƒã‚§ãƒ¼ãƒ³NFT"
emoji: "ğŸ¤–"
type: "tech" # tech: æŠ€è¡“è¨˜äº‹ / idea: ã‚¢ã‚¤ãƒ‡ã‚¢
topics: [Web3, NFT, Solidity, Ethereum, Tech]
published: true
publication_name: "singularity"
---

Fully-On-Chain.solã¯[Satoshi Nakajima](https://github.com/snakajima)ãŒé–‹ç™ºã—ã¦ã„ã‚‹ãƒ•ãƒ«ã‚ªãƒ³ãƒã‚§ãƒ¼ãƒ³ã®ã‚¹ãƒãƒ¼ãƒˆã‚³ãƒ³ãƒˆãƒ©ã‚¯ãƒˆç”¨ã®ã‚°ãƒ©ãƒ•ã‚£ãƒƒã‚¯ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã§ã™ã€‚ã‚¹ãƒãƒ¼ãƒˆã‚³ãƒ³ãƒˆãƒ©ã‚¯ãƒˆä¸Šã§ã€å°‘ãªã„ãƒ‡ãƒ¼ã‚¿é‡ã€å°‘ãªã„è¨ˆç®—å‡¦ç†ã§SVGã®ç”»åƒã‚’ç”Ÿæˆã™ã‚‹ãŸã‚ã®ãƒ„ãƒ¼ãƒ«ã§ã™ã€‚ä¸»ãªç”¨é€”ãƒ•ãƒ«ã‚ªãƒ³ãƒã‚§ãƒ¼ãƒ³ã®NFTã®SVGç”»åƒã®å‡¦ç†ã«ä½¿ã‚ã‚Œã¾ã™ã€‚

https://github.com/Cryptocoders-wtf/generative/tree/main/contract/contracts/packages/graphics

å…¬å¼ã‚µã‚¤ãƒˆã«ã„ãã¤ã‹ä½¿ã„æ–¹ã®ä¾‹ãŒã‚ã‚‹ã®ã§ã™ãŒã€å…¬å¼ã®ä¾‹ã‚’å…ƒã«ã‚·ãƒ³ãƒ—ãƒ«ãªNFTã‚’ä½œæˆã—ã¾ã—ãŸã€‚ä»Šå›ç´¹ä»‹ã™ã‚‹NFTã®ã‚¹ãƒãƒ¼ãƒˆã‚³ãƒ³ãƒˆãƒ©ã‚¯ãƒˆã¯ã€ãã®ã¾ã¾Ethereumã®mainnetã«ãƒ‡ãƒ—ãƒ­ã‚¤å¯èƒ½ã§ã™ã€‚è‡ªç”±ã«æ›¸ãæ›ãˆã¦ã€ãƒ•ãƒ«ã‚ªãƒ³ãƒã‚§ãƒ¼ãƒ³ã®NFTã®ä½œæˆã«åˆ©ç”¨ã—ã¦ãã ã•ã„ã€‚
æœ¬ç¨¿ã§ã¯ã€localã§hardhatã®nodeã‚’å‹•ã‹ã—ã€localã¸ãƒ‡ãƒ—ãƒ­ã‚¤ã™ã‚‹ã“ã¨ã‚’å‰æã¨ã—ã¦ã„ã¾ã™ã€‚


# æº–å‚™

[https://github.com/Cryptocoders-wtf/generative](https://github.com/Cryptocoders-wtf/generative)

ã‹ã‚‰æœ€æ–°ã®ã‚³ãƒ¼ãƒ‰ã‚’å–å¾—
```
git clone git@github.com:Cryptocoders-wtf/generative.git
```

`generative/contract`ä»¥ä¸‹ã§

```
npm install
```
ã‚’ã—ã¦å¿…è¦ãªnpmãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã€‚

`generative/contract/tools`ä»¥ä¸‹ã§ã‚‚åŒæ§˜ã«

```
npm install
```
ã‚’å®Ÿè¡Œã€‚

`generative/contract`ä»¥ä¸‹ã§

```
 npx hardhat node 
```

ã‚’å®Ÿè¡Œã—ã¦ã€ãƒ­ãƒ¼ã‚«ãƒ«ã§Ethereumãƒãƒ¼ãƒ‰ã‚’å‹•ã‹ã—ã¾ã™ã€‚
ã“ã‚Œã¯ãƒ‡ãƒ¼ãƒ¢ãƒ³ãªã®ã§ãƒ†ã‚¹ãƒˆä¸­ã¯èµ·å‹•ã—ãŸçŠ¶æ…‹ã«ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚

# ã‚½ãƒ¼ã‚¹ã«ã¤ã„ã¦

`generative/contract/contracts` [ä»¥ä¸‹](https://github.com/Cryptocoders-wtf/generative/tree/main/contract/contracts/)ãŒã‚¹ãƒãƒ¼ãƒˆã‚³ãƒ³ãƒˆãƒ©ã‚¯ãƒˆã®ã‚½ãƒ¼ã‚¹ã§ã™ã€‚ã“ã“ã«[ãƒ•ãƒ«ã‚ªãƒ³ãƒã‚§ãƒ¼ãƒ³ã®ã‚µã‚¤ãƒˆ](https://fullyonchain.xyz/)ã«ãƒ‡ãƒ—ãƒ­ã‚¤æ¸ˆã®NFTã®ã‚³ãƒ¼ãƒ‰ãŒã‚ã‚Šã¾ã™ã€‚æœ¬ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã‚’èª­ã¿çµ‚ãˆãŸå¾Œã¯ã€ä»–ã®ã‚³ãƒ¼ãƒ‰ã‚’èª­ã‚€ã“ã¨ã§ã•ã‚‰ã«ç†è§£ãŒæ·±ã¾ã‚Šã¾ã™ã€‚

æœ¬ç¨¿ã§ä½¿ç”¨ã™ã‚‹[ã‚µãƒ³ãƒ—ãƒ«](https://github.com/Cryptocoders-wtf/generative/tree/main/contract/contracts/samples)ã¯`generative/contract/contracts/samples/` ã«ã‚ã‚Šã¾ã™ã€‚å…¨ã¦ã®NFTã®è¦æ ¼ã§ã‚ã‚‹ERC721ã‚’ä½¿ã£ãŸã‚¹ãƒãƒ¼ãƒˆã‚³ãƒ³ãƒˆãƒ©ã‚¯ãƒˆã§ã™ã€‚NFTã¯ã»ã¨ã‚“ã©ã®å‡¦ç†ãŒå…±é€šã§ã€ç”»åƒã®é–¢ã™ã‚‹å‡¦ç†ã®ã¿ç•°ãªã‚Šã¾ã™ã€‚Fully-On-Chain.solã‚’ä½¿ã†SVGã®ç”»åƒå‡¦ç†ã¯å…¨ã¦generatePathã®é–¢æ•°å†…ã«ã‚ã‚Šã¾ã™ã€‚

## SimpleSVGToken
SimpleSVGToken.solã¯[SVGãƒ©ã‚¤ãƒ–ãƒ©ãƒª](https://github.com/Cryptocoders-wtf/generative/tree/main/contract/contracts/packages/graphics#svg-elements)ã‚’ä½¿ã†ã‚µãƒ³ãƒ—ãƒ«ã§ã™ã€‚


SVGãƒ©ã‚¤ãƒ–ãƒ©ãƒªã‚’ä½¿ã†ã¨ã€SVGã‚’ãƒ¡ã‚½ãƒƒãƒ‰ãƒã‚§ãƒ¼ãƒ³ã‚’ä½¿ã£ã¦è¨˜è¿°ã™ã‚‹ã“ã¨ãŒå¯èƒ½ã§ã™ã€‚


```
  function generateSVGPart(uint256 _tokenId) public pure returns (string memory svgPart) {
     SVG.Element memory path = SVG.rect(256, 256, 512, 512)
         .fill("yellow")
         .stroke("blue", 10)
         .transform("rotate(30 512 512)");
         
     svgPart = string(path.svg());
  }
```

ç”Ÿæˆã•ã‚Œã‚‹SVGã¯
```
<rect x="256" y="256" width="512" height="512" fill="yellow" stroke="blue" stroke-width="10" transform="rotate(30 512 512)"/>
```
ã§ã™ã€‚

`generative/contract`ä»¥ä¸‹ã§

```
 npx hardhat run scripts/deploy_simpleSVG.ts  
```

ã¨ã™ã‚‹ã¨ãƒ‡ãƒ—ãƒ­ã‚¤ã§ãã¾ã™ã€‚

[ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ](https://github.com/Cryptocoders-wtf/generative/tree/main/contract/contracts/packages/graphics#svg-elements)ã‚’å‚è€ƒã«ã€æ§˜ã€…ãªSVGã‚’ä½œã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚SVG.groupã‚’ä½¿ã†ã¨è¤‡æ•°ã®SVGã‚’çµ„ã¿åˆã‚ã›ã‚‹ã“ã¨ã‚‚ã§ãã¾ã™ã€‚

## SimplePathToken
SimplePathToken.solã¯ã€[Vectorã¨Path](https://github.com/Cryptocoders-wtf/generative/tree/main/contract/contracts/packages/graphics#path)ã‚’ä½¿ã†ã‚µãƒ³ãƒ—ãƒ«ã§ã™ã€‚

Vectorã¯ï¼’æ¬¡å…ƒã®ãƒ™ã‚¯ãƒˆãƒ«ã‚’æ‰±ã†ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã§ã€ãƒ™ã‚¯ãƒˆãƒ«ã®åŠ æ¸›ä¹—é™¤ã¨å›è»¢ãŒã§ãã¾ã™ã€‚
Pathã¯SVGã®ã¹ã‚¸ãƒ¥ã‚¨æ›²ç·šã‚’æ‰±ã†ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã§ã€ã‚¤ãƒ©ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¿ã§æ›¸ãã‚ˆã†ãªãªã‚ã‚‰ã‹ãªæ›²ç·šã‚’æãã“ã¨ãŒã§ãã¾ã™ã€‚
Vectorã¨Pathã¯ã‚»ãƒƒãƒˆã§ä½¿ã„ã€Vectorã§ãƒã‚¤ãƒ³ãƒˆã‚’æŒ‡å®šã—ã¦Pathã§ç·šã‚’ã¤ãªãã¾ã™ã€‚

```
  function generatePath(Props memory _props) public pure returns (bytes memory path) {
    uint count = _props.count;
    int radius = 511; // We want to fill the whole viewbox (1024 x 1024)
    int length = int(_props.length);
    Vector.Struct memory center = Vector.vector(512, 512); // center of the viewbox
    uint[] memory points = new uint[](count * 2);
    for (uint i = 0; i < count * 2; i += 2) {
      int angle = (Vector.PI2 * int(i)) / int(count) / 2;
      Vector.Struct memory vector = Vector.vectorWithAngle(angle, radius);
      points[i] = Path.roundedCorner(vector.add(center));
      points[i + 1] = Path.sharpCorner(vector.mul(length).div(100).rotate(Vector.PI2 / int(count) / 2).add(center));
    }
    path = points.closedPath();
  }
```

ç”Ÿæˆã•ã‚Œã‚‹SVGã¯
```
<path d="M833 505 C937 508 937 514 833 518 L644 524 828 566 C930 589 929 594 826 578 L639 549 812 625 C908 667 906 671 808 636 L630 572 785 679 C871 738 868 743 778 690 L616 594 748 729 C821 803 817 807 739 738 L598 612 703 769 C761 856 756 859 693 776 L578 626 651 801 C691 897 685 899 639 806 L555 637 593 822 C614 924 609 925 581 825 L530 643 533 832 C534 936 528 936 520 832 L505 644 472 830 C453 933 447 932 459 828 L480 640 412 817 C374 914 369 913 400 813 L456 632 356 793 C300 881 295 879 345 787 L435 620 306 758 C234 834 230 831 296 750 L415 603 262 715 C177 776 174 772 255 705 L400 583 229 664 C134 709 131 704 223 653 L388 561 204 608 C102 633 101 628 201 596 L381 537 192 548 C87 554 87 549 191 536 L379 512 191 487 C87 473 87 467 192 474 L381 486 201 427 C101 394 102 389 204 415 L388 462 223 370 C131 319 134 314 229 359 L400 440 255 318 C174 250 177 246 262 308 L415 420 296 273 C230 191 234 187 306 264 L435 403 345 236 C295 144 300 141 356 230 L456 391 400 210 C369 109 374 108 412 206 L480 383 459 194 C447 90 453 89 472 192 L505 379 520 190 C528 86 534 86 533 191 L530 380 581 197 C609 96 614 97 593 200 L555 386 639 216 C685 122 691 125 651 222 L578 397 692 246 C755 163 760 166 702 253 L598 411 739 285 C817 215 821 219 748 294 L616 429 778 332 C868 278 871 283 785 343 L629 451 807 386 C905 350 908 355 812 398 L639 474 826 444 C929 427 930 433 828 457 L644 499 833 505 " id="1"/>
```

ã§ã™ã€‚

`generative/contract` ä»¥ä¸‹ã§
```
 npx hardhat run scripts/deploy_simplepath.ts  
```

ã¨ã™ã‚‹ã¨ãƒ‡ãƒ—ãƒ­ã‚¤ã§ãã¾ã™ã€‚

## SimpleVectorToken

SimpleVectorToken.solã¯,SVGç”»åƒã‚’å–ã‚Šè¾¼ã‚€ãŸã‚ã®ã‚µãƒ³ãƒ—ãƒ«ã§ã™ã€‚ã‚¤ãƒ©ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¿ãªã©ã§ä½œæˆã—ãŸSVGãƒ‡ãƒ¼ã‚¿ã‚’åœ§ç¸®ã—NFTåŒ–ã§ãã¾ã™ã€‚
å…·ä½“çš„ã«ã¯SVGã®Pathã®dè¦ç´ ã®ãƒ‡ãƒ¼ã‚¿ã‚’åœ§ç¸®ã—ã€ã‚¹ãƒãƒ¼ãƒˆã‚³ãƒ³ãƒˆãƒ©ã‚¯ãƒˆã§è§£å‡ã™ã‚‹ã‚µãƒ³ãƒ—ãƒ«ã§ã™ã€‚SVGãƒ‡ãƒ¼ã‚¿ã‚’ãã®ã¾ã¾ã‚¹ãƒãƒ¼ãƒˆã‚³ãƒ³ãƒˆãƒ©ã‚¯ãƒˆã«ä¹—ã›ã‚‹ã®ã¯ãƒ‡ãƒ¼ã‚¿ã‚µã‚¤ã‚ºã®å•é¡Œã§ç¾å®Ÿçš„ã§ãªã„ã®ã§ã€ãƒ‡ãƒ¼ã‚¿ã‚’æ­£è¦åŒ–ã€åœ§ç¸®ã—ã¦ã‚¹ãƒãƒ¼ãƒˆã‚³ãƒ³ãƒˆãƒ©ã‚¯ãƒˆã«ä¹—ã›ã‚‹æ–¹æ³•ã‚’ç”¨æ„ã—ã¾ã—ãŸã€‚

ã¾ãšã¯SVGã®ç”»åƒãƒ‡ãƒ¼ã‚¿ã‚’åœ§ç¸®ã—ã¾ã™ã€‚å…ƒã¨ãªã‚‹SVGãƒ•ã‚¡ã‚¤ãƒ«ã¯ã€

```
<svg viewBox="0 0 1024 1024"  xmlns="http://www.w3.org/2000/svg">
<g transform="scale(0.25)"> 
<path d="M2947.77 1754.38c40.72,-272.26 -166.56,-418.61 -450,-516.24l91.95 -368.8 -224.5 -55.94 -89.51 359.09c-59.02,-14.72 -119.63,-28.59 -179.87,-42.34l90.16 -361.46 -224.36 -55.94 -92 368.68c-48.84,-11.12 -96.81,-22.11 -143.35,-33.69l0.26 -1.16 -309.59 -77.31 -59.72 239.78c0,0 166.56,38.18 163.05,40.53 90.91,22.69 107.35,82.87 104.62,130.57l-104.74 420.15c6.26,1.59 14.38,3.89 23.34,7.49 -7.49,-1.86 -15.46,-3.89 -23.73,-5.87l-146.81 588.57c-11.11,27.62 -39.31,69.07 -102.87,53.33 2.25,3.26 -163.17,-40.72 -163.17,-40.72l-111.46 256.98 292.15 72.83c54.35,13.63 107.61,27.89 160.06,41.3l-92.9 373.03 224.24 55.94 92 -369.07c61.26,16.63 120.71,31.97 178.91,46.43l-91.69 367.33 224.51 55.94 92.89 -372.33c382.82,72.45 670.67,43.24 791.83,-303.02 97.63,-278.78 -4.86,-439.58 -206.26,-544.44 146.69,-33.83 257.18,-130.31 286.64,-329.61l-0.07 -0.05zm-512.93 719.26c-69.38,278.78 -538.76,128.08 -690.94,90.29l123.28 -494.2c152.17,37.99 640.17,113.17 567.67,403.91zm69.43 -723.3c-63.29,253.58 -453.96,124.75 -580.69,93.16l111.77 -448.21c126.73,31.59 534.85,90.55 468.94,355.05l-0.02 0z" fill="#F7931A" />
</g>
</svg>
```

ã“ã®ãƒ‡ãƒ¼ã‚¿ã‚’å…ƒã«åœ§ç¸®ãƒ‡ãƒ¼ã‚¿ã‚’ä½œã‚Šã¾ã™ã€‚åœ§ç¸®ã™ã‚‹ãƒ„ãƒ¼ãƒ«ã¯`generative/contract/tools/src/sample.ts`ã«ã‚ã‚Šã¾ã™ã€‚TypeSciptã§è¨˜è¿°ã—ã¦ã„ã¾ã™ã€‚

ä¸Šè¨˜SVGãƒ‡ãƒ¼ã‚¿ã®pathã‚¨ãƒ¬ãƒ¡ãƒ³ãƒˆã®dè¦ç´ å†…ã®ãƒ‡ãƒ¼ã‚¿ã‚’`const bitcoin`ã«ä»£å…¥ã—ã€
```
const data = solidityString(compressPath(normalizePath(bitcoin, 1024 * 4), 1024));
```
ã§æ­£è¦åŒ–ã€åœ§ç¸®ã€ã‚¹ãƒãƒ¼ãƒˆã‚³ãƒ³ãƒˆãƒ©ã‚¯ãƒˆç”¨ã«å½¢å¼ã«å¤‰æ›ã—ã¦ã„ã¾ã™ã€‚
ã‚°ãƒ©ãƒ•ã‚£ãƒƒã‚¯ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã®ã‚¹ãƒãƒ¼ãƒˆã‚³ãƒ³ãƒˆãƒ©ã‚¯ãƒˆã§ã¯ã€1024ã®æ­£è¦åŒ–ã•ã‚ŒãŸãƒ‡ãƒ¼ã‚¿ã‚’å¿…è¦ã¨ã—ã¾ã™ã€‚æ­£è¦åŒ–ã™ã‚‹ãŸã‚ã« normalizePath ã«ã€å…ƒç”»åƒã®ç¸¦æ¨ªã®æœ€å¤§ã‚µã‚¤ã‚ºã‚’æ¸¡ã™å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚ã‚µãƒ³ãƒ—ãƒ«ç”»åƒã¯SVGã¯1024ã‚µã‚¤ã‚ºã§ã€pathã®ãƒ‡ãƒ¼ã‚¿ãŒtransformã§0.25 = 1/4ã—ã¦ã„ã‚‹ã®ã§ã€å…ƒã€…ã®ãƒ‡ãƒ¼ã‚¿ã¯ 1024 * 4ã®ã‚µã‚¤ã‚ºã‚’æŒ‡å®šã—ã¦ã„ã¾ã™(`1024*4`)

```
npx ts-node ./src/sample.ts   
```
ã§å®Ÿéš›ã«å¤‰æ›ã‚¹ã‚¯ãƒªãƒ—ãƒˆã‚’å‹•ã‹ã™ã“ã¨ãŒã§ãã¾ã™ã€‚

ç”Ÿæˆã•ã‚Œã¦ãƒ‡ãƒ¼ã‚¿ã‚’SimpleVectorToken.solã§åˆ©ç”¨ã—ã¦ã„ã¾ã™ã€‚
`bytes constant bitcoin`ã«ã€ä¸Šè¨˜ã‚¹ã‚¯ãƒªãƒ—ãƒˆã§ç”Ÿæˆã—ãŸåœ§ç¸®ãƒ‡ãƒ¼ã‚¿ãŒå…¥ã£ã¦ã„ã¾ã™ã€‚ãƒ‡ã‚³ãƒ¼ãƒ‰ã—ã¦è¡¨ç¤ºã™ã‚‹éƒ¨åˆ†ã¯ã‚·ãƒ³ãƒ—ãƒ«ã§ã™ã€‚
ã¾ãŸã€åŸºæœ¬çš„ã«ã¯SVGã®ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã‚’ä½¿ç”¨ã™ã‚‹ã®ã§ã€è§£å‡ã—ãŸãƒ‡ãƒ¼ã‚¿ã‚’fillã‚„rotateãªã©SVGãƒ©ã‚¤ãƒ–ãƒ©ãƒªã§æ‰±ã†ã“ã¨ãŒå¯èƒ½ã§ã™ã€‚
```
  function generateSVGPart(uint256 _tokenId) public pure returns (string memory svgPart) {
      SVG.Element memory path = SVG.path(Path.decode(bitcoin)).fill("#F7931A");
      
     svgPart = string(path.svg());
  }
```

æœ¬ã‚µãƒ³ãƒ—ãƒ«ã¯ï¼‘ã¤ã®path dã‚’åœ§ç¸®ã€åˆ©ç”¨ã—ã¦ã„ã¾ã™ãŒã€ã“ã®ã‚µãƒ³ãƒ—ãƒ«ã‚’å…ƒã«è¤‡æ•°ã®ãƒ‡ãƒ¼ã‚¿ã‚’ç”¨æ„ã™ã‚Œã°ã€è¤‡é›‘ãªç”»åƒã‚‚ãƒ•ãƒ«ã‚ªãƒ³ãƒã‚§ãƒ¼ãƒ³ã«å¤‰æ›ã§ãã¾ã™ã€‚
ã¾ãŸã€æ‰±ãˆã‚‹ãƒ‡ãƒ¼ã‚¿ã¯pathã®dè¦ç´ ã®ã¿ãªã®ã§ã™ãŒã€circle,polygon,line,rectãªã©ã¯å…¨ã¦pathã«å¤‰æ›å¯èƒ½ãªã®ã§ã€ä¸€èˆ¬çš„ãªç”»åƒã¯å…¨ã¦æ‰±ãˆã¾ã™ã€‚


`generative/contract` ä»¥ä¸‹ã§
```
 npx hardhat run scripts/deploy_simplevector.ts  
```

ã¨ã™ã‚‹ã¨ãƒ‡ãƒ—ãƒ­ã‚¤ã§ãã¾ã™ã€‚


## SimpleFontToken
SimpleFontToken.solã¯ã€ãƒ–ãƒ­ãƒƒã‚¯ãƒã‚§ãƒ¼ãƒ³ä¸Šã®ãƒ•ã‚©ãƒ³ãƒˆãƒ‡ãƒ¼ã‚¿ã‚’ä½¿ã£ã¦SVGç”»åƒã«æ–‡å­—ã‚’æ›¸ãã‚µãƒ³ãƒ—ãƒ«ã§ã™ã€‚
ãƒ•ã‚©ãƒ³ãƒˆãƒ‡ãƒ¼ã‚¿ã®ã‚ã‚‹ä»–ã®ã‚¹ãƒãƒ¼ãƒˆã‚³ãƒ³ãƒˆãƒ©ã‚¯ãƒˆã‚’å‘¼ã³å‡ºã™å¿…è¦ãŒã‚ã‚‹ãŸã‚ã€mainnetã‚„testnetãªã©ã®å®Ÿéš›ã®Ethreumä¸Šã§å‹•ã‹ã™å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚
hardhatã§ã¯ã€mainnet forkingã¨å‘¼ã°ã‚Œã‚‹mainnetã®ã‚³ãƒ”ãƒ¼ç’°å¢ƒã§ãƒ†ã‚¹ãƒˆãŒã§ãã‚‹ãŸã‚ã€å®Ÿéš›ã®Ethreumã¨åŒç­‰ã®ç’°å¢ƒã§Ethã‚’ä½¿ã‚ãªã„ã§å‹•ä½œã•ã›ã‚‹ã“ã¨ãŒã§ãã¾ã™

alchemyã§apikeyã‚’å–å¾—ã—ã€
```
 run npx hardhat node --fork https://eth-mainnet.alchemyapi.io/v2/xxxxxx"
```
ã®ã‚ˆã†ã«ãƒ­ãƒ¼ã‚«ãƒ«ã§Ethereumãƒãƒ¼ãƒ‰ã‚’å‹•ã‹ã—ã¾ã™ã€‚

Fontã‚’è¡¨ç¤ºã™ã‚‹ã‚³ãƒ¼ãƒ‰ã¯ä»¥ä¸‹ã§ã™ã€‚ç¾åœ¨ã€è‹±æ•°å­—ã®ãƒ•ã‚©ãƒ³ãƒˆã®ã¿ãªã®ã§è‹±èªã®æ–‡ç« ã‚’æ¸¡ã—ã¦ã„ã¾ã™ã€‚
æ”¹è¡Œã¯ã§ããªã„ã®ã§ï¼‘è¡Œãšã¤SVG.textã§ä½œæˆã—ã€ï¼’è¡Œç›®ä»¥é™ã¯transformã‚’ä½¿ã£ã¦ç§»å‹•ã•ã›ã¾ã™ã€‚ãƒ•ã‚©ãƒ³ãƒˆè¡¨ç¤ºã‚‚SVGãƒ©ã‚¤ãƒ–ãƒ©ãƒªã®ä¸€éƒ¨ãªã®ã§ã€SVGãƒ©ã‚¤ãƒ–ãƒ©ãƒªã‚’ä½¿ã£ã¦è¡¨ç¤ºã®åˆ¶å¾¡ãŒå¯èƒ½ã§ã™

```
  function generateSVGPart(uint256 _tokenId) public view returns (string memory svgPart) {
      SVG.Element memory path = SVG.group([
                                           SVG.text(font, "hello"),
                                           SVG.text(font, "world").transform('translate(0 1024)')
                                           ]).transform('scale(0.4)');
 
     svgPart = string(path.svg());
  }
```

SVGã®å‡ºåŠ›ã¯é•·ã„ã®ã§çœç•¥ã€‚ãƒ•ã‚©ãƒ³ãƒˆãƒ‡ãƒ¼ã‚¿ãªã®ã§ã€ä¸Šè¨˜ã§ç´¹ä»‹ã—ãŸå˜ç´”ãªSVGã¨æ¯”è¼ƒã—ã¦ãƒ‡ãƒ¼ã‚¿é‡ã¯å¤šã„ã§ã™ã€‚


`generative/contract` ä»¥ä¸‹ã§
```
 npx hardhat run scripts/deploy_simplefont.ts  
```

ã¨ã™ã‚‹ã¨ãƒ‡ãƒ—ãƒ­ã‚¤ã§ãã¾ã™ã€‚


ãƒ‡ãƒ—ãƒ­ã‚¤æ™‚ã«ãƒ‡ãƒ—ãƒ­ã‚¤ã‚¹ã‚¯ãƒªãƒ—ãƒˆã§

```
const lonrinaFont = addresses.londrina_solid["mainnet"];
const contract = await factory.deploy("SimpleFontToken", "Font", lonrinaFont);
```

ã¨ã€lonrinaFontã®ãƒ–ãƒ­ãƒƒã‚¯ãƒã‚§ãƒ¼ãƒ³ã®ã‚¢ãƒ‰ãƒ¬ã‚¹ã‚’æ¸¡ã—ã¦ã„ã¾ã™ã€‚ã“ã®ã‚¢ãƒ‰ãƒ¬ã‚¹ã‚’å…ƒã«ã€SimpleFontTokenã‹ã‚‰lonrinaFontã®å…¥ã£ãŸã‚¹ãƒãƒ¼ãƒˆã‚³ãƒ³ãƒˆãƒ©ã‚¯ãƒˆã‚’å‘¼ã³å‡ºã™ã“ã¨ãŒã§ãã¾ã™ã€‚goerliãªã©ã®ãƒ†ã‚¹ãƒˆãƒãƒƒãƒˆã§å‹•ã‹ã™å ´åˆã€ã“ã“ã®ã‚¢ãƒ‰ãƒ¬ã‚¹ã‚’å¤‰æ›´ã—ã¦goerliã«ãƒ‡ãƒ—ãƒ­ã‚¤ã—ã¦ãã ã•ã„ã€‚å„ç’°å¢ƒã®ã‚¹ãƒãƒ¼ãƒˆã‚³ãƒ³ãƒˆãƒ©ã‚¯ãƒˆã®ã‚¢ãƒ‰ãƒ¬ã‚¹ã¯ `src/utils/addresses` ã‚’å‚ç…§ã—ã¦ãã ã•ã„ã€‚


# ã¾ã¨ã‚

ã“ã‚Œã‚‰ã®ãƒ•ãƒ«ã‚ªãƒ³ãƒã‚§ãƒ¼ãƒ³ã®ã‚°ãƒ©ãƒ•ã‚£ãƒƒã‚¯ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã‚’çµ„ã¿åˆã‚ã›ã¦ä½¿ãˆã°å¤šå½©ãªãƒ•ãƒ«ã‚ªãƒ³ãƒã‚§ãƒ¼ãƒ³ã®NFTãŒä½œæˆå¯èƒ½ã§ã™
[ãƒ•ãƒ«ã‚ªãƒ³ãƒã‚§ãƒ¼ãƒ³](https://fullyonchain.xyz/)ã®Webã‚µã‚¤ãƒˆã«æœ‰ã‚‹NFTã®ã»ã¼å…¨ã¦ã¯ã€ã“ã®ä»•çµ„ã¿ã‚’ä½¿ã£ã¦ä½œæˆã•ã‚ŒãŸãƒ•ãƒ«ã‚ªãƒ³ãƒã‚§ãƒ¼ãƒ³NFTã§ã™ã€‚

NFTã§ã¯ã‚ã‚Šã¾ã›ã‚“ãŒã€ã“ã‚Œã‚‰ã®è¦ç´ ã‚’ç››ã‚Šè¾¼ã‚“ã ã‚³ãƒ³ãƒˆãƒ©ã‚¯ãƒˆã®å®Ÿè·µçš„ãªã‚µãƒ³ãƒ—ãƒ«ãŒ [test](https://github.com/Cryptocoders-wtf/generative/tree/main/contract/contracts/test)ã«ã‚ã‚Šã¾ã™ã€‚ã“ã¡ã‚‰ã®SVGã¨åå‰ã«ã¤ã„ãŸã‚¹ãƒãƒ¼ãƒˆã‚³ãƒ³ãƒˆãƒ©ã‚¯ãƒˆã‚‚å‚è€ƒã«ã©ã†ãã€‚

# ä»Šå›ä½œæˆã—ãŸNFT

ä»Šå›ä½œæˆã—ãŸNFTã‚’goerliã«ãƒ‡ãƒ—ãƒ­ã‚¤ã—ã¦ã„ã¾ã™ã€‚opensea, etherscanã®ã‚¢ãƒ‰ãƒ¬ã‚¹ã¯ä»¥ä¸‹ã§ã™ã€‚

SVG Token
https://testnets.opensea.io/ja/assets/goerli/0x02893397ff87e8a07b24b6aed1d2dc4d39a96ab0/1
https://goerli.etherscan.io/address/0x02893397Ff87e8A07B24B6Aed1D2Dc4d39a96Ab0#code

SVG Path

https://testnets.opensea.io/ja/assets/goerli/0x61c6d58fbe47b103a8eb8104ab2250f9cfffcc2d/1
https://goerli.etherscan.io/address/0x61c6d58fbe47b103a8eb8104ab2250f9cfffcc2d#code

SVG Vector

https://goerli.etherscan.io/address/0x7902593f20414894F8eC647b2BE540320e080425#code
https://testnets.opensea.io/ja/assets/goerli/0x7902593f20414894F8eC647b2BE540320e080425/1

SVG Font
https://goerli.etherscan.io/address/0xeE9FBCb10527EA23c3eCe3536022d41F682D4536#code
https://testnets.opensea.io/ja/assets/goerli/0xeE9FBCb10527EA23c3eCe3536022d41F682D4536/1